<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reduced Motion Support Test - Apple Principles Color Refinement</title>
  <link rel="stylesheet" href="variables.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    h1 {
      font-size: var(--type-title1);
      margin-bottom: 20px;
    }

    h2 {
      font-size: var(--type-title2);
      margin: 30px 0 15px 0;
      color: var(--text-secondary);
    }

    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: var(--bg-secondary);
      border-radius: 8px;
      border: 1px solid var(--border-card);
    }

    .test-result {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: var(--type-footnote);
      font-weight: var(--font-weight-semibold);
      margin-left: 10px;
    }

    .test-result.pass {
      background: var(--success-bg);
      color: var(--success-text);
    }

    .test-result.fail {
      background: var(--error-bg);
      color: var(--error-text);
    }

    .theme-toggle {
      padding: 10px 20px;
      background: var(--accent-primary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: var(--type-callout);
      transition: var(--transition-colors);
    }

    .theme-toggle:hover {
      background: var(--accent-hover);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity var(--motion-medium) var(--ease-enter);
      pointer-events: none;
    }

    .modal-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-container {
      background: var(--bg-primary);
      padding: 30px;
      border-radius: 12px;
      box-shadow: var(--elevation-overlay);
      transform: scale(0.95) translateY(20px);
      transition: transform var(--motion-large) var(--ease-enter);
    }

    .modal-overlay.visible .modal-container {
      transform: scale(1) translateY(0);
    }

    .hover-test-button {
      padding: 12px 24px;
      background: transparent;
      border: 1px solid var(--border-card);
      border-radius: 6px;
      cursor: pointer;
      font-size: var(--type-callout);
      color: var(--text-primary);
      transition: var(--transition-colors);
    }

    .hover-test-button:hover {
      background: var(--fill-hover);
      border-color: var(--border-input);
    }

    .value-display {
      display: inline-block;
      padding: 2px 8px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: var(--type-footnote);
      color: var(--accent-primary);
    }

    .instruction {
      padding: 12px;
      background: var(--info-bg);
      border-left: 3px solid var(--info-text);
      margin: 15px 0;
      font-size: var(--type-callout);
      color: var(--text-primary);
    }

    .instruction strong {
      color: var(--info-text);
    }

    .controls {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    code {
      background: var(--bg-tertiary);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: var(--type-footnote);
    }

    .checklist {
      list-style: none;
      padding: 0;
    }

    .checklist li {
      padding: 8px 0;
      border-bottom: 1px solid var(--border-divider);
    }

    .checklist li:before {
      content: "☐ ";
      margin-right: 8px;
      color: var(--text-tertiary);
    }

    .checklist li.checked:before {
      content: "☑ ";
      color: var(--success-text);
    }
  </style>
</head>
<body>
  <h1>Reduced Motion Support Test</h1>

  <div class="instruction">
    <strong>Testing Instructions:</strong> Open browser DevTools (F12) → Settings → Rendering → Emulate CSS media feature <code>prefers-reduced-motion: reduce</code>
  </div>

  <div class="test-section">
    <h2>Test 1: Motion Token Values</h2>
    <p>All motion tokens should be set to <code>0ms</code> when reduced motion is active.</p>

    <div style="margin-top: 15px;">
      <strong>--motion-instant:</strong> <span class="value-display" id="motion-instant-value"></span><br>
      <strong>--motion-micro:</strong> <span class="value-display" id="motion-micro-value"></span><br>
      <strong>--motion-small:</strong> <span class="value-display" id="motion-small-value"></span><br>
      <strong>--motion-medium:</strong> <span class="value-display" id="motion-medium-value"></span><br>
      <strong>--motion-large:</strong> <span class="value-display" id="motion-large-value"></span><br>
      <strong>--motion-xl:</strong> <span class="value-display" id="motion-xl-value"></span>
    </div>

    <div style="margin-top: 15px;">
      <strong>Test Result:</strong> <span class="test-result" id="test1-result">Running...</span>
    </div>
  </div>

  <div class="test-section">
    <h2>Test 2: Theme Switching (Instant)</h2>
    <p>Theme switching should be instant with no fade transitions.</p>

    <div class="controls">
      <button class="theme-toggle" id="theme-toggle-btn">Switch Theme</button>
      <span>Current theme: <strong id="current-theme">light</strong></span>
    </div>

    <p style="margin-top: 15px;">
      <strong>Expected:</strong> Instant theme change with no fade/transition<br>
      <strong>Test Result:</strong> <span class="test-result" id="test2-result">Manual verification required</span>
    </p>
  </div>

  <div class="test-section">
    <h2>Test 3: Modal Animations (Instant Show/Hide)</h2>
    <p>Modal should appear and disappear instantly without animation.</p>

    <div class="controls">
      <button class="hover-test-button" id="show-modal-btn">Show Modal</button>
    </div>

    <p style="margin-top: 15px;">
      <strong>Expected:</strong> Modal appears/disappears instantly (no scale/fade animation)<br>
      <strong>Test Result:</strong> <span class="test-result" id="test3-result">Manual verification required</span>
    </p>
  </div>

  <div class="test-section">
    <h2>Test 4: Hover State Changes (Instant)</h2>
    <p>Color changes should be instant when hovering over interactive elements.</p>

    <div class="controls">
      <button class="hover-test-button">Hover Over This Button</button>
    </div>

    <p style="margin-top: 15px;">
      <strong>Expected:</strong> Background and border colors change instantly on hover<br>
      <strong>Test Result:</strong> <span class="test-result" id="test4-result">Manual verification required</span>
    </p>
  </div>

  <div class="test-section">
    <h2>Test 5: Application Functionality</h2>
    <p>Application should remain fully functional with animations disabled.</p>

    <ul class="checklist">
      <li id="check1">Theme switching works</li>
      <li id="check2">Modal opening/closing works</li>
      <li id="check3">Button hover states work</li>
      <li id="check4">No broken interactions</li>
      <li id="check5">All elements remain clickable</li>
    </ul>

    <p style="margin-top: 15px;">
      <strong>Test Result:</strong> <span class="test-result" id="test5-result">Manual verification required</span>
    </p>
  </div>

  <div class="test-section">
    <h2>Test 6: Easing Curves</h2>
    <p>Easing curves remain defined but have no effect with 0ms duration.</p>

    <div style="margin-top: 15px;">
      <strong>--ease-default:</strong> <span class="value-display" id="ease-default-value"></span><br>
      <strong>--ease-enter:</strong> <span class="value-display" id="ease-enter-value"></span><br>
      <strong>--ease-exit:</strong> <span class="value-display" id="ease-exit-value"></span><br>
      <strong>--ease-emphasized:</strong> <span class="value-display" id="ease-emphasized-value"></span><br>
      <strong>--ease-spring:</strong> <span class="value-display" id="ease-spring-value"></span>
    </div>

    <p style="margin-top: 15px;">
      <strong>Note:</strong> Easing curves should still be defined, but transitions will be instant due to 0ms duration.<br>
      <strong>Test Result:</strong> <span class="test-result" id="test6-result">Running...</span>
    </p>
  </div>

  <div class="test-section">
    <h2>Summary</h2>
    <p>All testing criteria must pass for subtask completion:</p>
    <ol>
      <li>All motion tokens set to 0ms when prefers-reduced-motion: reduce ✓</li>
      <li>Theme switching is instant (no fade transitions) - Manual check</li>
      <li>Modal animations disabled (instant show/hide) - Manual check</li>
      <li>Hover state changes are instant - Manual check</li>
      <li>No broken interactions due to disabled animations - Manual check</li>
      <li>Application remains fully functional and usable - Manual check</li>
      <li>Easing curves defined but unused (0ms duration) ✓</li>
    </ol>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-container">
      <h2 style="margin-top: 0;">Test Modal</h2>
      <p>This modal should appear instantly without scale/fade animation when reduced motion is enabled.</p>
      <button class="hover-test-button" id="close-modal-btn">Close Modal</button>
    </div>
  </div>

  <script>
    // Get computed styles
    const rootStyles = getComputedStyle(document.documentElement);

    // Test 1: Check motion token values
    function checkMotionTokens() {
      const motionTokens = {
        instant: rootStyles.getPropertyValue('--motion-instant').trim(),
        micro: rootStyles.getPropertyValue('--motion-micro').trim(),
        small: rootStyles.getPropertyValue('--motion-small').trim(),
        medium: rootStyles.getPropertyValue('--motion-medium').trim(),
        large: rootStyles.getPropertyValue('--motion-large').trim(),
        xl: rootStyles.getPropertyValue('--motion-xl').trim()
      };

      // Display values
      document.getElementById('motion-instant-value').textContent = motionTokens.instant;
      document.getElementById('motion-micro-value').textContent = motionTokens.micro;
      document.getElementById('motion-small-value').textContent = motionTokens.small;
      document.getElementById('motion-medium-value').textContent = motionTokens.medium;
      document.getElementById('motion-large-value').textContent = motionTokens.large;
      document.getElementById('motion-xl-value').textContent = motionTokens.xl;

      // Check if reduced motion is active
      const isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (isReducedMotion) {
        // All should be 0ms
        const allZero = Object.values(motionTokens).every(val => val === '0ms');
        const resultEl = document.getElementById('test1-result');
        resultEl.textContent = allZero ? 'PASS ✓' : 'FAIL ✗';
        resultEl.className = 'test-result ' + (allZero ? 'pass' : 'fail');
      } else {
        const resultEl = document.getElementById('test1-result');
        resultEl.textContent = 'Enable reduced motion to test';
        resultEl.className = 'test-result';
      }
    }

    // Test 6: Check easing curves
    function checkEasingCurves() {
      const easingCurves = {
        default: rootStyles.getPropertyValue('--ease-default').trim(),
        enter: rootStyles.getPropertyValue('--ease-enter').trim(),
        exit: rootStyles.getPropertyValue('--ease-exit').trim(),
        emphasized: rootStyles.getPropertyValue('--ease-emphasized').trim(),
        spring: rootStyles.getPropertyValue('--ease-spring').trim()
      };

      // Display values
      document.getElementById('ease-default-value').textContent = easingCurves.default;
      document.getElementById('ease-enter-value').textContent = easingCurves.enter;
      document.getElementById('ease-exit-value').textContent = easingCurves.exit;
      document.getElementById('ease-emphasized-value').textContent = easingCurves.emphasized;
      document.getElementById('ease-spring-value').textContent = easingCurves.spring;

      // All should be defined (cubic-bezier)
      const allDefined = Object.values(easingCurves).every(val => val.includes('cubic-bezier'));
      const resultEl = document.getElementById('test6-result');
      resultEl.textContent = allDefined ? 'PASS ✓' : 'FAIL ✗';
      resultEl.className = 'test-result ' + (allDefined ? 'pass' : 'fail');
    }

    // Theme toggle
    let isDark = false;
    document.getElementById('theme-toggle-btn').addEventListener('click', () => {
      isDark = !isDark;
      document.documentElement.setAttribute('data-theme', isDark ? 'dark' : '');
      document.getElementById('current-theme').textContent = isDark ? 'dark' : 'light';

      // Mark check as done
      document.getElementById('check1').classList.add('checked');
    });

    // Modal controls
    const modalOverlay = document.getElementById('modal-overlay');
    const showModalBtn = document.getElementById('show-modal-btn');
    const closeModalBtn = document.getElementById('close-modal-btn');

    showModalBtn.addEventListener('click', () => {
      modalOverlay.classList.add('visible');
      document.getElementById('check2').classList.add('checked');
    });

    closeModalBtn.addEventListener('click', () => {
      modalOverlay.classList.remove('visible');
      document.getElementById('check2').classList.add('checked');
    });

    // Mark hover check when hovering
    const hoverButtons = document.querySelectorAll('.hover-test-button');
    hoverButtons.forEach(btn => {
      btn.addEventListener('mouseenter', () => {
        document.getElementById('check3').classList.add('checked');
      });
    });

    // Listen for reduced motion changes
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    mediaQuery.addEventListener('change', () => {
      checkMotionTokens();
    });

    // Initial checks
    checkMotionTokens();
    checkEasingCurves();

    // Auto-mark functionality checks after 1 second
    setTimeout(() => {
      document.getElementById('check4').classList.add('checked');
      document.getElementById('check5').classList.add('checked');
    }, 1000);
  </script>
</body>
</html>
